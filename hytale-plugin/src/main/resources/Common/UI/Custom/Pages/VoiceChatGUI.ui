$C = "../Common.ui";
$C.@PageOverlay {
  $C.@Container {
    Anchor: (Width: 650, Height: 550);

    #Title {
      Group {
        $C.@Title {
          @Text = "VOICE CHAT GROUPS";
        }
      }
    }

    #Content {
      LayoutMode: Top;
      Padding: (Top: 20, Bottom: 20, Left: 20, Right: 20);

      Group #Main {
        LayoutMode: Top;
        FlexWeight: 1;
        Anchor: (Width: 610, Height: 360);

        Group {
          LayoutMode: Left;
          Padding: (Bottom: 15);

          Label #ConnectionStatus {
            Style: (FontSize: 14, TextColor: #ff4444, Wrap: true, RenderBold: true);
            Anchor: (Width: 300);
            Text: "Voice Client - Disconnected";
          }
        }

        // Group Name Input Section
        Group #GroupNameInputSection {
          LayoutMode: Top;
          Padding: (Bottom: 10);

          Label #InputLabel {
            Style: (FontSize: 14, TextColor: #dddddd, RenderBold: true);
            Anchor: (Width: 610);
            Text: "Group Name:";
          }
        }

        Group {
          LayoutMode: Center;
          Padding: (Bottom: 15);

          TextField #GroupNameInput {
            Anchor: (Width: 250, Height: 35);
            PlaceholderText: "Enter group name...";
            Background: #1a1a1a;
            Padding: (Left: 10, Right: 10, Top: 8, Bottom: 8);
          }

          Group {
            Anchor: (Width: 10);
          }

          $C.@TextButton #CreateGroupButton {
            Anchor: (Width: 170, Height: 35);
            Text: "CREATE";
            Visible: true;
          }

          Group {
            Anchor: (Width: 10);
          }

          $C.@TextButton #JoinGroupButton {
            Anchor: (Width: 170, Height: 35);
            Text: "JOIN";
          }
        }

        // Two-column layout: left = current group/members, right = available groups
        Group #Columns {
          LayoutMode: Center;
          Padding: (Bottom: 15);

          Group #LeftPane {
            LayoutMode: Top;
            Anchor: (Width: 300);
            Padding: (Right: 10);

            // Group Members Section (only visible when in a group)
            Group #GroupMembersSection {
              LayoutMode: Top;
              Padding: (Bottom: 10);
              Visible: false;

              Group {
                LayoutMode: Center;
                Padding: (Bottom: 5);

                Label #MembersHeader {
                  Style: (FontSize: 14, TextColor: #dddddd, RenderBold: true);
                  Anchor: (Width: 140);
                  Text: "Group Members:";
                }

                Label #MemberCount {
                  Style: (FontSize: 14, TextColor: #888888);
                  Anchor: (Width: 140);
                  Text: "0 members";
                }
              }

              Group #MembersList {
                LayoutMode: Top;
                Anchor: (Width: 300, Height: 150);
                Padding: (Left: 8, Right: 8, Top: 8, Bottom: 8);
                Background: #1a1a1a;
                Overscroll: true;

                Label #MembersListContent {
                  Style: (FontSize: 13, TextColor: #ffffff, Wrap: true);
                  Anchor: (Width: 280);
                  Text: "Loading members...";
                }
              }

              // Group Settings Section (only visible for group creator)
              Group #GroupSettingsSection {
                LayoutMode: Top;
                Padding: (Top: 10);
                Visible: false;

                Label #SettingsHeader {
                  Style: (FontSize: 13, TextColor: #dddddd, RenderBold: true);
                  Anchor: (Width: 300);
                  Text: "Group Settings (Creator Only):";
                }

                Group {
                  LayoutMode: Left;
                  Padding: (Top: 8);

                  $C.@TextButton #IsolatedToggleButton {
                    Anchor: (Width: 140, Height: 32);
                    Text: "ISOLATED: ON";
                    Visible: true;
                  }

                  Group {
                    Anchor: (Width: 8);
                  }

                  $C.@TextButton #SmallLeaveButton {
                    Anchor: (Width: 140, Height: 32);
                    Text: "LEAVE";
                    Visible: true;
                  }
                }
              }
            }
          }

          Group #RightPane {
            LayoutMode: Top;
            Anchor: (Width: 300);
            Padding: (Left: 10);

            // Available Groups Section
            Group {
              LayoutMode: Top;
              Padding: (Bottom: 5);

              Label #AvailableGroupsHeader {
                Style: (FontSize: 14, TextColor: #dddddd, RenderBold: true);
                Anchor: (Width: 300);
                Text: "Available Groups:";
              }
            }

            Group #GroupsList {
              LayoutMode: Top;
              Padding: (Bottom: 10);
              Anchor: (Width: 300, Height: 150);
              Background: #1a1a1a;
              Overscroll: true;

              // Dynamically populated group items will appear here
              Label #GroupsListPlaceholder {
                Style: (FontSize: 13, TextColor: #888888, Wrap: true);
                Anchor: (Width: 260, Height: 400);
                Padding: (Top: 8, Left: 10, Right: 10);
                Text: "Loading groups...";
              }
            }
          }
        }
      }

      // Buttons Section - 2x3 grid layout
      Group #Buttons {
        LayoutMode: Top;
        Padding: (Top: 20);

        // Row 1: Empty now (buttons moved to input row)
        Group #Row1 {
          LayoutMode: Center;
          Padding: (Bottom: 10);
        }

        // Row 3: Close
        Group #Row3 {
          LayoutMode: Center;
          Padding: (Top: 10);

          $C.@TextButton #CloseButton {
            Anchor: (Width: 170, Height: 34);
            Text: "CLOSE";
          }
        }
      }
    }
  }
}
