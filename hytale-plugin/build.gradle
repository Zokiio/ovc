dependencies {
    implementation project(':common')
    
    // Hytale API - using official HytaleServer.jar from Hytale installation
    compileOnly files('/Users/zoki/hytale/server/HytaleServer.jar')
    
    // Voice server dependencies
    implementation "de.maxhenkel.opus4j:opus4j:${opus4j_version}"
    implementation "io.netty:netty-all:${netty_version}"
    
    // JSON processing
    implementation "com.google.code.gson:gson:${gson_version}"
    
    // HTTP client (removed - no longer needed)
    // implementation "com.squareup.okhttp3:okhttp:4.12.0"
}

// Configure JAR to include dependencies (fat JAR)
jar {
    dependsOn(':common:jar')
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

tasks.register('copyToHytale', Copy) {
    dependsOn jar
    from jar.archiveFile
    into '/Users/zoki/hytale/server/mods'
}

tasks.build {
    finalizedBy copyToHytale
}
